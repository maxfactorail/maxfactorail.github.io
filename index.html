<!DOCTYPE html>
  <html>
  <head>
    <title>Nimit AR</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge; width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=1">
    <!-- External stylesheets and scripts -->
    <link rel="stylesheet" href="/assets/styles.css">
    <link rel="icon" href="https://ssouth.azurewebsites.net/wp-content/uploads/2023/04/ss_logo.png" />
    <script type="module" src="/assets/arscript.js"></script>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.5/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden">
  
  <!-- Loading overlay -->
  <div id="loading-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7);">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white;">
      Loading...
    </div>
  </div>
  
  <!-- AR Scene -->
  <a-scene
    arjs='detectionMode: mono_and_matrix;
    trackingMethod: best;'
    renderer="logarithmicDepthBuffer: true;"
    vr-mode-ui="enabled: false"
    gesture-detector
    loaded="onSceneLoaded"
  >
          <a-assets>
            <!-- Preload and store the video asset for later use -->
            <video 
            response-type="arraybuffer" 
            loop 
            crossorigin 
            webkit-playsinline
            playsinline 
            controls
            id="vscipsusciopen" 
            muted
            preload="none"
            >
              <source src="/videos/16.mp4">
            </video>
          </a-assets>
          <!-- Render a plane with the video as a texture on top of the NFT marker -->
          <a-nft
            videohandler
            type="nft"
            url="/markers/12"
            video-vidhandler="videoId: #vscipsusciopen;"
            smooth="true" 
            smoothCount="10" 
            smoothTolerance="0.01" 
            smoothThreshold="5"
            onmarkerfound="onmarkerfound"
            onmarkerlost="onmarkerlost"
          >
          <a-plane 
            scale="480 480" 
            position="0 50 0" 
            rotation="-90 0 0" 
            material="transparent:true;
            src:#vscipsusciopen" 
            controls
        />
          </a-nft>
    <!-- Camera entity for user perspective and interaction -->
    <a-entity camera look-controls-enabled="false" mouse-cursor></a-entity>
  </a-scene>
  
  <!-- Monitor for displaying content when no AR markers are detected -->
  <div id="monitor" style="display: none;">
    <div class="scan"></div>
    <div class="screen">
      <!-- <img src="https://ssouth.azurewebsites.net/wp-content/uploads/2023/04/ss_logo.png" alt="Logo" style="width: 100%; height: 100%;"> -->
    </div>
  </div>
  
  <!-- NFT Loading animation -->
  <div id="nft-loading-animation" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white;">
    <p>Loading NFT...</p>
  </div>
  
  <!-- Loading finished confirmation dialog -->
  <div id="loading-finished-dialog" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7);">
    <!-- Dialog content -->
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center;">
      <h1>Loading finished!</h1>
      <h5>Please confirm to continue.</h5>
      <button type="button" id="ok-button">OK</button>
      
    </div>
  </div>
  
  </body>
  </html>